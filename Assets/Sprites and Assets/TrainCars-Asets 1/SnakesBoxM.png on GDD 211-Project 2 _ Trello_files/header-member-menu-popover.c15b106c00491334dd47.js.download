(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{"./app/gamma/src/components/popovers/account-switcher/account-item.less":function(e,a,t){var n=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=t("./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-item.less");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var s={insert:"head",singleton:!1};n(o,s);e.exports=o.locals||{}},"./app/gamma/src/components/popovers/account-switcher/account-switcher.less":function(e,a,t){var n=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=t("./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-switcher.less");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var s={insert:"head",singleton:!1};n(o,s);e.exports=o.locals||{}},"./app/gamma/src/components/popovers/header-member-menu/index.tsx":function(e,a,t){"use strict";t.r(a);var n=t("./packages/browser/index.ts"),o=t("./node_modules/js-cookie/src/js.cookie.js"),s=t.n(o),c=t("./app/src/components/PopoverMenu/index.ts"),r=t("./node_modules/react/index.js"),l=t.n(r),i=t("./node_modules/react-redux/es/index.js"),d=t("./app/gamma/src/selectors/members.ts"),u=t("./app/gamma/src/selectors/teams.ts");const p=e=>(e=>{var a,t;return(null!==(a=null===(t=Object(d.a)(e))||void 0===t?void 0:t.products)&&void 0!==a?a:[]).length>0})(e)||(e=>!!Object(u.c)(e).some((e=>{var a;return(null!==(a=e.products)&&void 0!==a?a:[]).length>0})))(e);var m=t("./packages/test-ids/index.ts"),b=t("./packages/i18n/index.ts"),g=t("./app/src/components/MemberAvatar/index.ts"),h=t("./app/gamma/src/components/popovers/account-switcher/account-item.less"),v=t.n(h);const f=({email:e,avatarSource:a,name:t,username:n,initials:o,avatars:s})=>l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:v.a.accountItem},l.a.createElement("div",{className:v.a.accountAvatar},l.a.createElement(g.b,{fullName:t,username:n,initials:o,avatars:s,avatarSource:a,size:40})),l.a.createElement("div",null,l.a.createElement("div",{className:v.a.accountName},t),l.a.createElement("span",{className:v.a.accountEmail},e))));var _=t("./packages/storage/index.ts"),x=t("./packages/config/index.ts"),j=t("./app/gamma/src/components/popovers/account-switcher/account-switcher.less"),w=t.n(j),k=t("./packages/atlassian-analytics/index.ts");const A=Object(b.forTemplate)("header_account_switcher"),y=new URLSearchParams({prompt:"select_account",continue:"".concat(x.siteDomain,"/auth/atlassian/callback"),application:"trello"}),E="".concat(x.identityBaseUrl,"/login?").concat(y.toString());class C extends l.a.Component{render(){var e;const{onClickAddAccount:a,currentAccount:t,hasAddedAccount:n,hasAaAccount:o}=this.props,{name:s,email:r,id:i,avatarSource:d,initials:u,username:p,isAaMastered:m,oneTimeMessagesDismissed:b=[]}=t||{},g=null!==(e=null==t?void 0:t.avatars)&&void 0!==e?e:void 0,h=null==b?void 0:b.includes("headerMemberMenuAddAccount");return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{name:s,email:r,id:i,avatarSource:d,avatars:g,initials:u,username:p}),(m||o)&&n&&l.a.createElement(c.b,{onClick:e=>{k.Analytics.sendUIEvent({action:"clicked",actionSubject:"link",source:"memberMenuInlineDialog",actionSubjectId:"settingsSwitchAccountsLink"}),window.location.href=E},title:A("switch-account")}),l.a.createElement(c.b,{onClick:a,appendSeparator:!0},l.a.createElement("span",{className:h?"":w.a.addAccountNew,"data-new-string":A("new")},A("add-another-account"))))}}var N=Object(i.c)((e=>({me:Object(d.a)(e)})))((({onClickAddAccount:e,me:a,hasAaAccount:t})=>{const[n,o]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{o("true"===_.TrelloStorage.get("accountSwitcherAccountAdded"))}),[]),l.a.createElement(C,{currentAccount:a,onClickAddAccount:e,hasAddedAccount:n,hasAaAccount:t})}));const S=Object(b.forTemplate)("header_member_menu");a.default=Object(i.c)((e=>{const a=Object(d.a)(e);return{canLogout:!!(a&&a.loginTypes&&a.loginTypes.length),me:a,showBillingUrl:p(e)&&!Object(n.dontUpsell)()}}))((({canLogout:e,me:a,useAccountSwitcher:t,showBillingUrl:o,onClickShortcuts:i,onClickChangePassword:d,onClickMenuLink:u,onClickAddAccount:p,hasAaAccount:b})=>{const g=Object(r.useRef)(null);return a?l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{method:"post",action:"/logout",style:{display:"none"},ref:g},l.a.createElement("input",{name:"dsc",defaultValue:s.a.get("dsc")})),l.a.createElement(c.a,null,t&&l.a.createElement(N,{onClickAddAccount:p,hasAaAccount:b}),l.a.createElement(l.a.Fragment,null,l.a.createElement(c.c,{href:"/".concat(a.username,"/profile"),title:S("profile-and-visibility"),testId:m.HeaderTestIds.MemberMenuProfile,onClick:u}),l.a.createElement(c.c,{href:"/".concat(a.username,"/activity"),title:S("activity"),onClick:u}),l.a.createElement(c.c,{className:"js-cards",href:"/".concat(a.username,"/cards"),title:S("cards"),testId:m.HeaderTestIds.MemberMenuCards,onClick:u}),l.a.createElement(c.c,{href:"/".concat(a.username,"/account"),title:S("settings"),appendSeparator:!o,testId:m.HeaderTestIds.MemberMenuSettings,onClick:u}),o&&l.a.createElement(c.c,{href:"/".concat(a.username,"/billing"),title:S("billing"),appendSeparator:!0,onClick:u})),l.a.createElement(c.c,{appendSeparator:Object(n.isTouch)()&&a.isAaMastered,title:S("help"),href:"/contact?url=".concat(encodeURIComponent(location.href)),target:"_blank"}),!Object(n.isTouch)()&&l.a.createElement(c.b,{title:S("shortcuts"),onClick:i,appendSeparator:a.isAaMastered}),e?l.a.createElement(c.b,{title:S("log-out"),onClick:()=>{var e;null===(e=g.current)||void 0===e||e.submit()},testId:m.HeaderTestIds.MemberMenuLogout}):l.a.createElement(c.b,{onClick:d},S("log-out"),l.a.createElement("br",null),S("you-ll-need-to-set-a-password-first")))):null}))},"./app/src/components/PopoverMenu/PopoverMenu.less":function(e,a,t){var n=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=t("./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/PopoverMenu/PopoverMenu.less");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var s={insert:"head",singleton:!1};n(o,s);e.exports=o.locals||{}},"./app/src/components/PopoverMenu/index.ts":function(e,a,t){"use strict";t.d(a,"a",(function(){return f})),t.d(a,"b",(function(){return v})),t.d(a,"c",(function(){return h}));var n=t("./node_modules/classnames/index.js"),o=t.n(n),s=t("./app/src/forwardRefComponent.ts"),c=t("./app/src/components/RouterLink/RouterLink.tsx"),r=t("./node_modules/react/index.js"),l=t.n(r),i=t("./app/src/components/PopoverMenu/PopoverMenu.less"),d=t.n(i),u=t("./packages/a11y/index.ts");function p(){return(p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function m(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}const b=({children:e,description:a,rawDescription:t,title:n,icon:s})=>l.a.createElement(l.a.Fragment,null,s&&l.a.cloneElement(s,{size:"small"}),l.a.createElement("span",{className:o()(d.a.title,a&&d.a.withoutMargins)},n||e),(a||t)&&l.a.createElement("p",{className:d.a.description},a||t)),g=({appendSeparator:e,children:a})=>l.a.createElement("li",{className:o()(d.a.item,e&&d.a.withSeparator)},a),h=e=>{let{appendSeparator:a,testId:t,href:n,target:s,className:r,onClick:i}=e,h=m(e,["appendSeparator","testId","href","target","className","onClick"]);const[v,f]=Object(u.a)();return l.a.createElement(g,{appendSeparator:a},l.a.createElement(c.a,p({className:o()(d.a.link,r,v&&d.a.linkFocusRing),href:n,testId:t,onClick:i,target:s},f),l.a.createElement(b,h)))},v=Object(s.a)("PopoverMenuButton",((e,a)=>{let{appendSeparator:t,onClick:n,className:s,disabled:c,testId:r}=e,i=m(e,["appendSeparator","onClick","className","disabled","testId"]);const[h,v]=Object(u.a)();return l.a.createElement(g,{appendSeparator:t},l.a.createElement("button",p({className:o()(d.a.link,h&&d.a.linkFocusRing,s),disabled:c,onClick:n,"data-test-id":r,ref:a},v),l.a.createElement(b,i)))})),f=({className:e,children:a,testId:t})=>l.a.createElement("nav",{className:e},l.a.createElement("ul",{"data-test-id":t},a))},"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-item.less":function(e,a,t){(a=e.exports=t("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"._3_6DOPfdxwYdOa{padding:4px 8px 4px 12px}._1hNJCPJOYai-3H{display:flex}._1njv2a9PIrnydF{margin-top:4px;max-width:230px}._2TvKKP0vwCN5Zd{font-size:9pt;color:#b3bac5;display:block;text-overflow:ellipsis;overflow:hidden;max-width:230px}",""]),a.locals={accountAvatar:"_3_6DOPfdxwYdOa",accountItem:"_1hNJCPJOYai-3H",accountName:"_1njv2a9PIrnydF",accountEmail:"_2TvKKP0vwCN5Zd"}},"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-switcher.less":function(e,a,t){(a=e.exports=t("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".xhAwkqhAGt8KyF:after{background-color:#d6ecd2;color:#49852e;content:attr(data-new-string);margin-left:8px;border-radius:15px;padding:2px 8px}",""]),a.locals={addAccountNew:"xhAwkqhAGt8KyF"}},"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/PopoverMenu/PopoverMenu.less":function(e,a,t){(a=e.exports=t("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,'._2FCfpANq784raH{background-color:transparent;border:none;background:#fff;border-radius:0;box-shadow:none;color:#172b4d;display:block;height:100%;padding:6px 12px;text-align:left;text-decoration:none;width:100%;transition:none;margin:0;outline:0}._2FCfpANq784raH:hover{background-color:transparent;border:none;box-shadow:none;background:rgba(9,30,66,.04)}._2FCfpANq784raH:active{background-color:transparent;border:none;box-shadow:none;background:#e4f0f6}._2FCfpANq784raH._154-yjtGZB4imr:focus{outline:1px dotted #000}@media screen and (-webkit-min-device-pixel-ratio:0){._2FCfpANq784raH._154-yjtGZB4imr:focus{outline:5px auto -webkit-focus-ring-color}}._2FCfpANq784raH[disabled]:active,._2FCfpANq784raH[disabled]:focus,._2FCfpANq784raH[disabled]:hover{background:transparent;color:#a5adba!important}._2FCfpANq784raH[disabled]:active ._3oK2g02ecSZ4wX svg,._2FCfpANq784raH[disabled]:focus ._3oK2g02ecSZ4wX svg,._2FCfpANq784raH[disabled]:hover ._3oK2g02ecSZ4wX svg{color:#a5adba!important}._2FCfpANq784raH[disabled]:active span[name=check],._2FCfpANq784raH[disabled]:focus span[name=check],._2FCfpANq784raH[disabled]:hover span[name=check]{color:#6b778c!important}._2FCfpANq784raH[disabled]:active .Puvhv7-oGbJGmR,._2FCfpANq784raH[disabled]:focus .Puvhv7-oGbJGmR,._2FCfpANq784raH[disabled]:hover .Puvhv7-oGbJGmR{color:#a5adba!important}.lcLi2SyiMFND91{font-size:14px;font-weight:400;line-height:20px}.lcLi2SyiMFND91._27ZbL25GrWr6E2{margin:0}.Puvhv7-oGbJGmR{color:#5e6c84;font-size:12px;font-weight:400;line-height:16px;margin:4px 0 0;padding:0}._1IJ3BWdWDb2xH2:after{background-color:rgba(9,30,66,.13);content:" ";display:block;height:1px;margin:8px auto;width:calc(100% - 20px)}',""]),a.locals={link:"_2FCfpANq784raH",linkFocusRing:"_154-yjtGZB4imr",icon:"_3oK2g02ecSZ4wX",description:"Puvhv7-oGbJGmR",title:"lcLi2SyiMFND91",withoutMargins:"_27ZbL25GrWr6E2",withSeparator:"_1IJ3BWdWDb2xH2"}},"./packages/a11y/index.ts":function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t("./node_modules/react/index.js");const o=(e={})=>{const[a,t]=Object(n.useState)(!1),[o,s]=Object(n.useState)(!1),[c,r]=Object(n.useState)(!1),l=()=>{o&&c||t(!0)};return[a,{onMouseEnter:a=>{s(!0),t(!1),e.onMouseEnter&&e.onMouseEnter(a)},onMouseLeave:a=>{s(!1),t(!1),e.onMouseLeave&&e.onMouseLeave(a)},onMouseDown:a=>{r(!0),t(!1),e.onMouseDown&&e.onMouseDown(a)},onKeyDown:a=>{r(!1),l(),e.onKeyDown&&e.onKeyDown(a)},onKeyUp:a=>{l(),e.onKeyUp&&e.onKeyUp(a)},onBlur:a=>{t(!1),e.onBlur&&e.onBlur(a)}}]}}}]);
//# sourceMappingURL=header-member-menu-popover.c15b106c00491334dd47.js.map